# WorkTimer PRD (Product Requirements Document)

## 1. 제품 개요

### 1.1 제품명
**WorkTimer** - 개인 업무 시간 추적 앱

### 1.2 제품 비전
직장인과 프리랜서가 자신의 업무 시간을 손쉽게 기록하고 분석할 수 있는 모바일 앱

### 1.3 목표 사용자
- 업무 시간을 정확하게 기록하고 싶은 직장인
- 프로젝트별 시간 추적이 필요한 프리랜서
- 자기 생산성을 분석하고 싶은 개인

### 1.4 핵심 가치 제안
- **간단함**: 원터치로 업무 시작/종료
- **정확성**: 실시간 타이머로 정확한 시간 기록
- **투명성**: 일별/주별/월별 통계로 업무 패턴 파악

---

## 2. 기술 스택

| 영역 | 기술 |
|------|------|
| Frontend | React Native + Expo |
| Backend | Supabase (PostgreSQL + Auth + Storage) |
| Language | TypeScript |
| State Management | TBD (React Context / Zustand) |
| Navigation | Expo Router / React Navigation |

---

## 3. 화면 구성

### 3.1 TimerScreen (타이머 화면) - 메인

**목적**: 업무 시간 실시간 기록

**기능**:
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 타이머 시작/종료 | 원터치로 업무 세션 시작/종료 | P0 |
| 실시간 경과 시간 표시 | 현재 진행 중인 세션의 경과 시간 | P0 |
| 오늘 총 업무 시간 | 당일 완료된 세션들의 합계 | P0 |
| 진행 중 세션 복구 | 앱 재시작 시 진행 중인 세션 자동 복구 | P0 |

**UI 요소**:
- 큰 타이머 디스플레이 (HH:MM:SS)
- 시작/종료 버튼
- 오늘 총 시간 요약

### 3.2 HistoryScreen (기록 화면)

**목적**: 과거 업무 기록 조회 및 관리

**기능**:
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 세션 목록 조회 | 최근 1년간 모든 세션 표시 | P0 |
| 날짜별 그룹핑 | 날짜 단위로 세션 그룹화 | P0 |
| 세션 수정 | 시작/종료 시간 수동 수정 | P1 |
| 세션 삭제 | 잘못 기록된 세션 삭제 | P1 |
| 수동 세션 추가 | 과거 시간 수동 입력 | P1 |

**UI 요소**:
- 캘린더 또는 날짜 리스트
- 세션 카드 (시작시간, 종료시간, 지속시간)
- 수정/삭제 액션

### 3.3 SettingsScreen (설정 화면)

**목적**: 앱 설정 및 데이터 관리

**기능**:
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 전체 통계 | 총 업무 시간, 평균 등 통계 표시 | P0 |
| CSV 내보내기 | 기록 데이터 CSV 형식으로 내보내기 | P1 |
| 전체 데이터 삭제 | 모든 기록 초기화 | P2 |
| 알림 설정 | 업무 시작/종료 알림 (추후) | P2 |

---

## 4. 데이터베이스 스키마

### 4.1 work_sessions 테이블

```sql
CREATE TABLE work_sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  start_time TIMESTAMPTZ NOT NULL,
  end_time TIMESTAMPTZ,  -- NULL = 진행 중
  duration INTEGER DEFAULT 0,  -- 초 단위
  date DATE NOT NULL,  -- YYYY-MM-DD
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 인덱스
CREATE INDEX idx_work_sessions_date ON work_sessions(date);
CREATE INDEX idx_work_sessions_end_time ON work_sessions(end_time);
```

### 4.2 데이터 규칙
- `end_time`이 NULL이면 진행 중인 세션
- `duration`은 세션 종료 시 계산하여 저장
- `date`는 세션 시작 기준 날짜

---

## 5. API 명세

### 5.1 세션 관리

| 함수명 | 설명 | HTTP Method |
|--------|------|-------------|
| `getTodayTotal()` | 오늘 총 업무 시간 조회 | SELECT |
| `getOngoingSession()` | 진행 중인 세션 조회 | SELECT |
| `startSession()` | 새 세션 시작 | INSERT |
| `endSession(id)` | 세션 종료 | UPDATE |
| `updateSession(id, data)` | 세션 수정 | UPDATE |
| `deleteSession(id)` | 세션 삭제 | DELETE |
| `createManualSession(data)` | 수동 세션 생성 | INSERT |

### 5.2 통계/내보내기

| 함수명 | 설명 |
|--------|------|
| `getAllStats()` | 전체 통계 데이터 조회 |
| `exportToCSV()` | CSV 형식 데이터 생성 |
| `deleteAllData()` | 전체 데이터 삭제 |

---

## 6. 마일스톤

### Phase 1: MVP (핵심 기능)
- [ ] 프로젝트 세팅 (Expo + Supabase) ✅
- [ ] 데이터베이스 스키마 생성
- [ ] 타이머 화면 구현
- [ ] 세션 시작/종료 기능
- [ ] 오늘 총 시간 표시

### Phase 2: 기록 관리
- [ ] 기록 화면 구현
- [ ] 세션 목록 조회
- [ ] 세션 수정/삭제
- [ ] 수동 세션 추가

### Phase 3: 설정 & 통계
- [ ] 설정 화면 구현
- [ ] 통계 대시보드
- [ ] CSV 내보내기
- [ ] 데이터 관리

### Phase 4: 고도화 (추후)
- [ ] 사용자 인증 (로그인)
- [ ] 다중 기기 동기화
- [ ] 프로젝트/태그 분류
- [ ] 목표 시간 설정
- [ ] 알림 기능
- [ ] 위젯 지원

---

## 7. 고도화 아이디어

### 7.1 단기 개선
| 기능 | 설명 | 난이도 |
|------|------|--------|
| 다크 모드 | 시스템 설정 연동 | 낮음 |
| 햅틱 피드백 | 버튼 터치 시 진동 | 낮음 |
| 빠른 액션 | 위젯으로 바로 시작/종료 | 중간 |
| 오프라인 지원 | 인터넷 없이도 기록 | 중간 |

### 7.2 중기 개선
| 기능 | 설명 | 난이도 |
|------|------|--------|
| 사용자 인증 | Supabase Auth로 로그인 | 중간 |
| 프로젝트 분류 | 업무를 프로젝트별로 분류 | 중간 |
| 주간/월간 리포트 | 기간별 통계 시각화 | 중간 |
| 알림 | 장시간 업무 시 휴식 알림 | 중간 |

### 7.3 장기 개선
| 기능 | 설명 | 난이도 |
|------|------|--------|
| 팀 기능 | 팀원들과 시간 공유 | 높음 |
| AI 분석 | 업무 패턴 분석 및 제안 | 높음 |
| 캘린더 연동 | Google Calendar 동기화 | 높음 |
| 청구서 생성 | 프리랜서용 청구서 자동 생성 | 높음 |

---

## 8. 성공 지표 (KPI)

| 지표 | 목표 |
|------|------|
| 일일 활성 사용 | 앱 시작 1회 이상 |
| 세션 완료율 | 시작된 세션의 90% 이상 정상 종료 |
| 데이터 정확도 | 수동 수정 비율 10% 미만 |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 0.1 | 2024-11-28 | 초안 작성 |
