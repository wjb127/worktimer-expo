
  ğŸ“Š í…Œì´ë¸”: work_sessions

  ì»¬ëŸ¼:
  - id (primary key)
  - start_time (timestamptz) - ì„¸ì…˜ ì‹œì‘ ì‹œê°„
  - end_time (timestamptz, nullable) - ì„¸ì…˜ ì¢…ë£Œ ì‹œê°„ (null = ì§„í–‰ì¤‘)
  - duration (integer) - ì§€ì† ì‹œê°„ (ì´ˆ ë‹¨ìœ„)
  - date (date) - ë‚ ì§œ (YYYY-MM-DD í˜•ì‹)
  - created_at (timestamptz, auto)

  ğŸ”Œ API ì‚¬ìš© íŒ¨í„´

  TimerScreen (íƒ€ì´ë¨¸ í™”ë©´)

  1. getTodayTotal - ì˜¤ëŠ˜ ì´ ì—…ë¬´ ì‹œê°„ ì¡°íšŒ
  SELECT duration FROM work_sessions
  WHERE date = 'ë‚ ì§œ' AND end_time IS NOT NULL
  2. getOngoingSession - ì§„í–‰ì¤‘ì¸ ì„¸ì…˜ í™•ì¸
  SELECT * FROM work_sessions
  WHERE date = 'ë‚ ì§œ' AND end_time IS NULL
  ORDER BY created_at DESC LIMIT 1
  3. startSession - ì„¸ì…˜ ì‹œì‘ (INSERT)
  INSERT INTO work_sessions (start_time, end_time, duration, date)
  VALUES ('ì‹œì‘ì‹œê°„', null, 0, 'ë‚ ì§œ')
  4. endSession - ì„¸ì…˜ ì¢…ë£Œ (UPDATE)
  UPDATE work_sessions
  SET end_time = 'ì¢…ë£Œì‹œê°„', duration = 'ì§€ì†ì‹œê°„ì´ˆ'
  WHERE id = 'ì„¸ì…˜ID'

  HistoryScreen (ê¸°ë¡ í™”ë©´)

  1. ìµœê·¼ 1ë…„ ë°ì´í„° ì¡°íšŒ
  SELECT * FROM work_sessions
  WHERE date >= '1ë…„ì „ë‚ ì§œ'
  ORDER BY date DESC
  2. updateSession - ì„¸ì…˜ ìˆ˜ì •
  UPDATE work_sessions
  SET start_time = 'ì‹œì‘', end_time = 'ì¢…ë£Œ', duration = 'ê³„ì‚°ê°’', date = 'ë‚ ì§œ'
  WHERE id = 'ì„¸ì…˜ID'
  3. deleteSession - ì„¸ì…˜ ì‚­ì œ
  DELETE FROM work_sessions WHERE id = 'ì„¸ì…˜ID'

  SettingsScreen (ì„¤ì • í™”ë©´)

  1. ì „ì²´ í†µê³„ ì¡°íšŒ
  SELECT duration, date, start_time FROM work_sessions
  WHERE end_time IS NOT NULL
  ORDER BY date ASC
  2. CSV ë‚´ë³´ë‚´ê¸°ìš© ì¡°íšŒ
  SELECT * FROM work_sessions
  WHERE end_time IS NOT NULL
  ORDER BY start_time DESC
  3. ì „ì²´ ë°ì´í„° ì‚­ì œ
  DELETE FROM work_sessions WHERE id != 0

  ğŸ“ í—¬í¼ í•¨ìˆ˜ ìœ„ì¹˜

  ëª¨ë“  Supabase API í˜¸ì¶œì€ src/shared/lib/session.tsì— í—¬í¼ í•¨ìˆ˜ë¡œ ì •ë¦¬ë˜ì–´ ìˆì–´ìš”:
  - getTodayTotal() - ì˜¤ëŠ˜ ì´ ì‹œê°„
  - startSession() - ì„¸ì…˜ ì‹œì‘
  - endSession() - ì„¸ì…˜ ì¢…ë£Œ
  - getOngoingSession() - ì§„í–‰ì¤‘ ì„¸ì…˜ ì¡°íšŒ
  - updateSession() - ì„¸ì…˜ ìˆ˜ì •
  - deleteSession() - ì„¸ì…˜ ì‚­ì œ
  - createManualSession() - ìˆ˜ë™ ì„¸ì…˜ ìƒì„±

  Supabase í´ë¼ì´ì–¸íŠ¸ëŠ” src/lib/supabase.tsì—ì„œ ì´ˆê¸°í™”ë˜ê³ , í™˜ê²½ë³€ìˆ˜ .env.localì—ì„œ URLê³¼ API í‚¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤!
